#pragma checksum "E:\githup\Vencerme\Vencer.me\Views\Payment\Success.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "cae890e8cde7e2f88514ee6fb00c21cabea310dc"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Payment_Success), @"mvc.1.0.view", @"/Views/Payment/Success.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Vencer.me;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Data.Dto.User;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Data.Dto.Customer;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Data.Dto.Business;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Data.Dto.Payment;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Data.Dto.Permition;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Data.Dto.SupportExchanges;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "E:\githup\Vencerme\Vencer.me\Views\_ViewImports.cshtml"
using Data.Dto.Vencoin;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"cae890e8cde7e2f88514ee6fb00c21cabea310dc", @"/Views/Payment/Success.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"aa51d1f44a53d1f5e4b4d512a78a04d457a9a881", @"/Views/_ViewImports.cshtml")]
    public class Views_Payment_Success : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("style", new global::Microsoft.AspNetCore.Html.HtmlString("display:inherit"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-action", "CreateBioBusiness", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_2 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("asp-controller", "Business", global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_3 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("class", new global::Microsoft.AspNetCore.Html.HtmlString("btn btn-success  p-l-30 p-r-30 f-w-400"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "E:\githup\Vencerme\Vencer.me\Views\Payment\Success.cshtml"
  
    Layout = "~/Views/Shared/_LayoutWithOutMeno.cshtml";
    // Layout = "~/Views/Shared/_Layout.cshtml";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<div class=""col-md-5"" style=""margin:0 auto; text-align:center;display:none"" id=""SuccessPayment"">
    <div class=""card card-inverse bg-black text-right"">
        <div class=""card-block"">
            <blockquote class=""card-blockquote"">
                <p class=""f-s-14"">پرداخت موفقیت آمیز بود در حال  ثبت نام شما و ثبت کسب کار شما هستیم لطفا صبر کنید... </p>
                <footer class=""f-s-12"">
                    سایت vencer میزبان کسب کار های آینده
                </footer>
            </blockquote>
        </div>
    </div>
</div>
<div class=""col-md-5"" style=""margin:0 auto; text-align:center ;display:none"" id=""CanselPayment"">
    <div class=""card card-inverse text-right"" style="" background-color: #d88a09 !important"">
        <div class=""card-block"">
            <blockquote class=""card-blockquote"">
                <p class=""f-s-14"">پرداخت موفقیت آمیز بود در حال  ثبت نام شما و ثبت کسب کار شما هستیم لطفا صبر کنید... </p>
                ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("a", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "cae890e8cde7e2f88514ee6fb00c21cabea310dc6559", async() => {
                WriteLiteral("‍بازگشت به صفحه قبل");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.AnchorTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Action = (string)__tagHelperAttribute_1.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_1);
            __Microsoft_AspNetCore_Mvc_TagHelpers_AnchorTagHelper.Controller = (string)__tagHelperAttribute_2.Value;
            __tagHelperExecutionContext.AddTagHelperAttribute(__tagHelperAttribute_2);
            __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_3);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
            </blockquote>
        </div>
    </div>
</div>




<script>
    var refId = """";
    var href = window.location.href.split('&')[1].split('=')[1];
    if (href == ""NOK"") {
        $('#CanselPayment').show();
        $('#SuccessPayment').hide();
        gritterNotification('error', 'موفق', 'عملیات با موفقیت انجام نشد');
    }
    else {
        $('#CanselPayment').hide();
        $('#SuccessPayment').show();
        $.ajax({
            url: '/api/ApiPayment/VerifyPayment',
            type: 'Get',
            success: function (response) {
                console.log(response);
                refId = response.data;
                if (response.isSuccess) {
                    ;
                    $.ajax({
                        url: '/api/ApiPayment/GetCreateUserAndSetBusinessAndSetPayment',
                        type: 'Get',
                        success: function (response) {
                            console.log(response);
                            if (response.isSuccess) {
          ");
            WriteLiteral(@"                      regsiterUser(response.data);
                            }
                        }
                    });
                    gritterNotification('success', 'موفق', 'عملیات با موفقیت انجام شد');
                }
            }
        });
    }

    function regsiterUser(data) {
        $.ajax({
            url: '/api/ApiAccount/Regsiter',
            type: 'Post',
            data: {
                Mobile: data.mobile,
                UserName: data.userName,
                password: data.password,
                passwordConfirmed: data.passwordConfirmed,
                Email: data.email
            },
            success: function (response) {
                console.log(response);
                if (response.isSuccess) {
                    createPayment(data);
                }
                else {
                    disabledBtn('btnRegsiterForm', false)
                    gritterNotification('error', 'خطا', response.message);

                }
            },
           ");
            WriteLiteral(@" error: function (xhr) {
                disabledBtn('btnRegsiterForm', false)
                console.log(xhr);
                ;
                gritterNotification('error', 'خطا', 'خطایی درسیستم به وجود امده است');

            }
        });
    }

    function createPayment(data) {
        ;
        $.ajax({
            url: '/api/ApiPayment/CreatePayment',
            type: 'Post',
            headers: { ""Authorization"": 'Bearer ' + getCookie('Bearer') },
            data: {
                Refid: refId,
                Amount: data.amount,
                Authority: data.authority
            },
            success: function (response) {
                ;
                console.log(response);
                if (response.isSuccess) {
                    createBio(data);
                }
                else {
                    gritterNotification('error', 'خطا', response.message);

                }
            },
            error: function (xhr) {
                console.log(xhr);
                ");
            WriteLiteral(@";
                gritterNotification('error', 'خطا', 'خطایی درسیستم به وجود امده است');

            }
        });

    }

    function createBio(createBio) {
        $.ajax({
            url: '/api/ApiBusiness/CreateBusiness',
            headers: { ""Authorization"": 'Bearer ' + getCookie('Bearer') },
            type: 'Post',
            data: {
                BusinessUrl: createBio.businessUrl,
                NameBusiness: createBio.nameBusiness,
                TypeBusines: createBio.typeBusines,
                BusinessManeger: createBio.businessManeger,
                Description: createBio.description,
                Email: createBio.email,
                Address: createBio.address,
                Clock: createBio.clock,
                PathVideo: createBio.pathVideo,
                Mobile: createBio.mobile,
                HomeNumber: createBio.homeNumber,
                FaxNumber: createBio.faxNumber,
                WhatsApp: createBio.whatsApp,
                Telegram: createBio.telegram,
");
            WriteLiteral(@"                Linkedin: createBio.linkedin,
                Youtube: createBio.youtube,
                Instagram: createBio.instagram,
                FaceBook: createBio.faceBook,
                Aparat: createBio.aparat,
                SitePersonal: createBio.sitePersonal,
                PathLogoMini: createBio.pathLogoMini,
                PathLogoMax: createBio.pathLogoMax,
                PathLicense: createBio.pathLicense
            },
            success: function (response) {
                ;
                console.log(response);
                if (response.isSuccess) {
                    window.location.href = ""/home/Index""
                    gritterNotification('success', 'موفق', 'تبریک با موفقیت عضو شدید');
                }
                else {
                    gritterNotification('error', 'خطا', response.message);
                }
            },
            error: function (xhr) {
                console.log(xhr);
                ;
                gritterNotification('error', 'خط");
            WriteLiteral("ا\', \'خطایی درسیستم به وجود امده است\');\n            }\n        });\n    }\n</script>");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
